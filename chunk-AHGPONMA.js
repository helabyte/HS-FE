import{a as Ne,b as ze,c as Ue,d as Ve,f as Ke,g as te,h as $e,i as P,n as ke}from"./chunk-IQ3U23OT.js";import{a as Fe}from"./chunk-TPPJ3RF3.js";import{$c as Oe,A as ye,Aa as O,Cb as Ee,E as Re,H as be,K as A,N as Te,Na as _e,R as Se,Rc as xe,U as Y,X as Q,Zc as Me,a as p,b as j,ba as f,ca as x,ea as d,g as ge,ga as c,h as pe,ha as M,i as Le,ia as we,ib as F,j as H,ja as Ie,ka as Ae,l as me,o as q,p as L,qb as De,r as C,t as Ce,ta as S,tb as N,u as T,va as Pe,vb as J,w as ve,wc as je,y as Z,z as X,zc as ee}from"./chunk-2BAC4AMN.js";var y=class{},ne=(()=>{class n extends y{getTranslation(e){return L({})}static \u0275fac=(()=>{let e;return function(i){return(e||(e=S(n)))(i||n)}})();static \u0275prov=f({token:n,factory:n.\u0275fac})}return n})(),w=class{},ie=(()=>{class n{handle(e){return e.key}static \u0275fac=function(t){return new(t||n)};static \u0275prov=f({token:n,factory:n.\u0275fac})}return n})();function v(n){return typeof n<"u"&&n!==null}function k(n){return z(n)&&!le(n)&&n!==null}function z(n){return typeof n=="object"}function le(n){return Array.isArray(n)}function We(n){return typeof n=="string"}function st(n){return typeof n=="function"}function se(n,a){let e=Object.assign({},n);return z(n)?(z(n)&&z(a)&&Object.keys(a).forEach(t=>{k(a[t])?t in n?e[t]=se(n[t],a[t]):Object.assign(e,{[t]:a[t]}):Object.assign(e,{[t]:a[t]})}),e):se({},a)}function re(n,a){let e=a.split(".");a="";do a+=e.shift(),v(n)&&v(n[a])&&(k(n[a])||le(n[a])||!e.length)?(n=n[a],a=""):e.length?a+=".":n=void 0;while(e.length);return n}function rt(n,a,e){let t=a.split("."),i=n;for(let s=0;s<t.length;s++){let r=t[s];s===t.length-1?i[r]=e:((!i[r]||!k(i[r]))&&(i[r]={}),i=i[r])}}var R=class{},ae=(()=>{class n extends R{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(e,t){if(We(e))return this.interpolateString(e,t);if(st(e))return this.interpolateFunction(e,t)}interpolateFunction(e,t){return e(t)}interpolateString(e,t){return t?e.replace(this.templateMatcher,(i,s)=>{let r=re(t,s);return v(r)?r:i}):e}static \u0275fac=(()=>{let e;return function(i){return(e||(e=S(n)))(i||n)}})();static \u0275prov=f({token:n,factory:n.\u0275fac})}return n})(),b=class{},oe=(()=>{class n extends b{compile(e,t){return e}compileTranslations(e,t){return e}static \u0275fac=(()=>{let e;return function(i){return(e||(e=S(n)))(i||n)}})();static \u0275prov=f({token:n,factory:n.\u0275fac})}return n})(),I=class{defaultLang;currentLang=this.defaultLang;translations={};langs=[];onTranslationChange=new O;onLangChange=new O;onDefaultLangChange=new O},U=new d("ISOLATE_TRANSLATE_SERVICE"),V=new d("USE_DEFAULT_LANG"),K=new d("DEFAULT_LANGUAGE"),$=new d("USE_EXTEND"),_=n=>C(n)?n:L(n),D=(()=>{class n{store;currentLoader;compiler;parser;missingTranslationHandler;useDefaultLang;extend;loadingTranslations;pending=!1;_translationRequests={};lastUseLanguage=null;get onTranslationChange(){return this.store.onTranslationChange}get onLangChange(){return this.store.onLangChange}get onDefaultLangChange(){return this.store.onDefaultLangChange}get defaultLang(){return this.store.defaultLang}set defaultLang(e){this.store.defaultLang=e}get currentLang(){return this.store.currentLang}set currentLang(e){this.store.currentLang=e}get langs(){return this.store.langs}set langs(e){this.store.langs=e}get translations(){return this.store.translations}set translations(e){this.store.translations=e}constructor(e,t,i,s,r,o=!0,l=!1,u=!1,h){this.store=e,this.currentLoader=t,this.compiler=i,this.parser=s,this.missingTranslationHandler=r,this.useDefaultLang=o,this.extend=u,l&&(this.store=new I),h&&this.setDefaultLang(h)}setDefaultLang(e){if(e===this.defaultLang)return;let t=this.retrieveTranslations(e);typeof t<"u"?(this.defaultLang==null&&(this.defaultLang=e),t.pipe(A(1)).subscribe(()=>{this.changeDefaultLang(e)})):this.changeDefaultLang(e)}getDefaultLang(){return this.defaultLang}use(e){if(this.lastUseLanguage=e,e===this.currentLang)return L(this.translations[e]);this.currentLang||(this.currentLang=e);let t=this.retrieveTranslations(e);return C(t)?(t.pipe(A(1)).subscribe(()=>{this.changeLang(e)}),t):(this.changeLang(e),L(this.translations[e]))}changeLang(e){e===this.lastUseLanguage&&(this.currentLang=e,this.onLangChange.emit({lang:e,translations:this.translations[e]}),this.defaultLang==null&&this.changeDefaultLang(e))}retrieveTranslations(e){if(typeof this.translations[e]>"u"||this.extend)return this._translationRequests[e]=this._translationRequests[e]||this.loadAndCompileTranslations(e),this._translationRequests[e]}getTranslation(e){return this.loadAndCompileTranslations(e)}loadAndCompileTranslations(e){this.pending=!0;let t=this.currentLoader.getTranslation(e).pipe(Y(1),A(1));return this.loadingTranslations=t.pipe(T(i=>this.compiler.compileTranslations(i,e)),Y(1),A(1)),this.loadingTranslations.subscribe({next:i=>{this.translations[e]=this.extend&&this.translations[e]?p(p({},i),this.translations[e]):i,this.updateLangs(),this.pending=!1},error:i=>{this.pending=!1}}),t}setTranslation(e,t,i=!1){let s=this.compiler.compileTranslations(t,e);(i||this.extend)&&this.translations[e]?this.translations[e]=se(this.translations[e],s):this.translations[e]=s,this.updateLangs(),this.onTranslationChange.emit({lang:e,translations:this.translations[e]})}getLangs(){return this.langs}addLangs(e){let t=e.filter(i=>!this.langs.includes(i));t.length>0&&(this.langs=[...this.langs,...t])}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResultForKey(e,t,i){let s;if(e&&(s=this.runInterpolation(re(e,t),i)),s===void 0&&this.defaultLang!=null&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(s=this.runInterpolation(re(this.translations[this.defaultLang],t),i)),s===void 0){let r={key:t,translateService:this};typeof i<"u"&&(r.interpolateParams=i),s=this.missingTranslationHandler.handle(r)}return s!==void 0?s:t}runInterpolation(e,t){if(le(e))return e.map(i=>this.runInterpolation(i,t));if(k(e)){let i={};for(let s in e){let r=this.runInterpolation(e[s],t);r!==void 0&&(i[s]=r)}return i}else return this.parser.interpolate(e,t)}getParsedResult(e,t,i){if(t instanceof Array){let s={},r=!1;for(let l of t)s[l]=this.getParsedResultForKey(e,l,i),r=r||C(s[l]);if(!r)return s;let o=t.map(l=>_(s[l]));return ye(o).pipe(T(l=>{let u={};return l.forEach((h,g)=>{u[t[g]]=h}),u}))}return this.getParsedResultForKey(e,t,i)}get(e,t){if(!v(e)||!e.length)throw new Error('Parameter "key" is required and cannot be empty');return this.pending?this.loadingTranslations.pipe(be(i=>_(this.getParsedResult(i,e,t)))):_(this.getParsedResult(this.translations[this.currentLang],e,t))}getStreamOnTranslationChange(e,t){if(!v(e)||!e.length)throw new Error('Parameter "key" is required and cannot be empty');return Z(X(()=>this.get(e,t)),this.onTranslationChange.pipe(Q(i=>{let s=this.getParsedResult(i.translations,e,t);return _(s)})))}stream(e,t){if(!v(e)||!e.length)throw new Error('Parameter "key" required');return Z(X(()=>this.get(e,t)),this.onLangChange.pipe(Q(i=>{let s=this.getParsedResult(i.translations,e,t);return _(s)})))}instant(e,t){if(!v(e)||e.length===0)throw new Error('Parameter "key" is required and cannot be empty');let i=this.getParsedResult(this.translations[this.currentLang],e,t);return C(i)?Array.isArray(e)?e.reduce((s,r)=>(s[r]=r,s),{}):e:i}set(e,t,i=this.currentLang){rt(this.translations[i],e,We(t)?this.compiler.compile(t,i):this.compiler.compileTranslations(t,i)),this.updateLangs(),this.onTranslationChange.emit({lang:i,translations:this.translations[i]})}changeDefaultLang(e){this.defaultLang=e,this.onDefaultLangChange.emit({lang:e,translations:this.translations[e]})}reloadLang(e){return this.resetLang(e),this.loadAndCompileTranslations(e)}resetLang(e){delete this._translationRequests[e],delete this.translations[e]}getBrowserLang(){if(typeof window>"u"||!window.navigator)return;let e=this.getBrowserCultureLang();return e?e.split(/[-_]/)[0]:void 0}getBrowserCultureLang(){if(!(typeof window>"u"||typeof window.navigator>"u"))return window.navigator.languages?window.navigator.languages[0]:window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage}static \u0275fac=function(t){return new(t||n)(c(I),c(y),c(b),c(R),c(w),c(V),c(U),c($),c(K))};static \u0275prov=f({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var jt=(n={})=>Ae([n.loader||{provide:y,useClass:ne},n.compiler||{provide:b,useClass:oe},n.parser||{provide:R,useClass:ae},n.missingTranslationHandler||{provide:w,useClass:ie},I,{provide:U,useValue:n.isolate},{provide:V,useValue:n.useDefaultLang},{provide:$,useValue:n.extend},{provide:K,useValue:n.defaultLanguage},D]),Ge=(()=>{class n{static forRoot(e={}){return{ngModule:n,providers:[e.loader||{provide:y,useClass:ne},e.compiler||{provide:b,useClass:oe},e.parser||{provide:R,useClass:ae},e.missingTranslationHandler||{provide:w,useClass:ie},I,{provide:U,useValue:e.isolate},{provide:V,useValue:e.useDefaultLang},{provide:$,useValue:e.extend},{provide:K,useValue:e.defaultLanguage},D]}}static forChild(e={}){return{ngModule:n,providers:[e.loader||{provide:y,useClass:ne},e.compiler||{provide:b,useClass:oe},e.parser||{provide:R,useClass:ae},e.missingTranslationHandler||{provide:w,useClass:ie},{provide:U,useValue:e.isolate},{provide:V,useValue:e.useDefaultLang},{provide:$,useValue:e.extend},{provide:K,useValue:e.defaultLanguage},D]}}static \u0275fac=function(t){return new(t||n)};static \u0275mod=N({type:n});static \u0275inj=x({})}return n})();var at=new d("LOCALIZE_ROUTER_FORROOT_GUARD"),ue=new d("RAW_ROUTES"),m=function(n){return n.LocalStorage="LocalStorage",n.SessionStorage="SessionStorage",n.Cookie="Cookie",n}(m||{}),He=new d("USE_CACHED_LANG"),qe=new d("CACHE_MECHANISM"),Ze=new d("CACHE_NAME"),Xe=new d("COOKIE_FORMAT"),Ye=new d("INITIAL_NAVIGATION"),Qe=new d("DEFAULT_LANG_FUNCTION"),Je=new d("ALWAYS_SET_PREFIX"),ot="LOCALIZE_DEFAULT_LANGUAGE",lt="{{value}};{{expires}}",ut=!1,G=(()=>{class n{constructor(e=!0,t=!0,i=m.LocalStorage,s=ot,r=void 0,o=lt,l=ut){this.useCachedLang=e,this.alwaysSetPrefix=t,this.cacheName=s,this.cookieFormat=o,this.initialNavigation=l,this.cacheMechanism=i,this.defaultLangFunction=r}static{this.\u0275fac=function(t){return new(t||n)(c(He),c(Je),c(qe),c(Ze),c(Qe),c(Xe),c(Ye))}}static{this.\u0275prov=f({token:n,factory:n.\u0275fac})}}return n})(),ct=30,E=(()=>{class n{constructor(e,t,i){this.translate=e,this.location=t,this.settings=i}init(e){let t;if(this.routes=e,!this.locales||!this.locales.length)return Promise.resolve();let i=this.getLocationLang(),s=this._getBrowserLang();this.settings.defaultLangFunction?this.defaultLang=this.settings.defaultLangFunction(this.locales,this._cachedLang,s):this.defaultLang=this._cachedLang||s||this.locales[0],t=i||this.defaultLang,this.translate.setDefaultLang(this.defaultLang);let r=[];if(this.settings.alwaysSetPrefix){let o={path:"",redirectTo:this.defaultLang,pathMatch:"full"},l=e.findIndex(u=>u.path==="**");l!==-1&&(this._wildcardRoute=e.splice(l,1)[0]),r=this.routes.splice(0,this.routes.length,o)}else r=[...this.routes];for(let o=r.length-1;o>=0;o--)r[o].data&&r[o].data.skipRouteLocalization&&(this.settings.alwaysSetPrefix&&this.routes.push(r[o]),(r[o].redirectTo===void 0||!r[o].data.skipRouteLocalization.localizeRedirectTo||typeof r[o].redirectTo=="function")&&r.splice(o,1));return r&&r.length&&(this.locales.length>1||this.settings.alwaysSetPrefix)&&(this._languageRoute={children:r},this.routes.unshift(this._languageRoute)),this._wildcardRoute&&this.settings.alwaysSetPrefix&&this.routes.push(this._wildcardRoute),Ce(this.translateRoutes(t))}initChildRoutes(e){return this._translateRouteTree(e),e}translateRoutes(e){return new ge(t=>{this._cachedLang=e,this._languageRoute&&(this._languageRoute.path=e),this.translate.use(e).subscribe(i=>{this._translationObject=i,this.currentLang=e,this._languageRoute?(this._translateRouteTree(this._languageRoute.children,!0),this._wildcardRoute&&this._wildcardRoute.redirectTo&&this._translateProperty(this._wildcardRoute,"redirectTo",!0)):this._translateRouteTree(this.routes,!0),t.next(void 0),t.complete()})})}_translateRouteTree(e,t){e.forEach(i=>{let s=i.data&&i.data.skipRouteLocalization,r=!s||s.localizeRedirectTo;if(i.redirectTo&&r&&typeof i.redirectTo!="function"){let o=i.redirectTo.indexOf("/")===0||t;this._translateProperty(i,"redirectTo",o)}s||(i.path!==null&&i.path!==void 0&&this._translateProperty(i,"path"),i.children&&this._translateRouteTree(i.children),i.loadChildren&&i._loadedRoutes?.length&&this._translateRouteTree(i._loadedRoutes))})}_translateProperty(e,t,i){let s=e.data=e.data||{};s.localizeRouter||(s.localizeRouter={}),s.localizeRouter[t]||(s.localizeRouter=j(p({},s.localizeRouter),{[t]:e[t]}));let r=this.translateRoute(s.localizeRouter[t]);e[t]=i?this.addPrefixToUrl(r):r}get urlPrefix(){return this.settings.alwaysSetPrefix||this.currentLang!==this.defaultLang?this.currentLang?this.currentLang:this.defaultLang:""}addPrefixToUrl(e){let t=e.split("?"),i=t[0].length===1&&t[0]==="/";t[0]=t[0].replace(/\/$/,"");let s=t.join("?");return this.urlPrefix===""?s:!s.startsWith("/")&&!i?`${this.urlPrefix}/${s}`:`/${this.urlPrefix}${s}`}translateRoute(e){let t=e.split("?");if(t.length>2)throw Error("There should be only one query parameter block in the URL");return t[0].split("/").map(s=>s.length?this.translateText(s):s).join("/")+(t.length>1?`?${t[1]}`:"")}getLocationLang(e){let t=(e||this.location.path()).split(/[\?;]/),i=[];return t.length>0&&(i=t[0].split("/")),i.length>1&&this.locales.indexOf(i[1])!==-1?i[1]:i.length&&this.locales.indexOf(i[0])!==-1?i[0]:null}_getBrowserLang(){return this._returnIfInLocales(this.translate.getBrowserLang())}get _cachedLang(){if(this.settings.useCachedLang){if(this.settings.cacheMechanism===m.LocalStorage)return this._cacheWithLocalStorage();if(this.settings.cacheMechanism===m.SessionStorage)return this._cacheWithSessionStorage();if(this.settings.cacheMechanism===m.Cookie)return this._cacheWithCookies()}}set _cachedLang(e){this.settings.useCachedLang&&(this.settings.cacheMechanism===m.LocalStorage&&this._cacheWithLocalStorage(e),this.settings.cacheMechanism===m.SessionStorage&&this._cacheWithSessionStorage(e),this.settings.cacheMechanism===m.Cookie&&this._cacheWithCookies(e))}_cacheWithLocalStorage(e){try{if(typeof window>"u"||typeof window.localStorage>"u")return;if(e){window.localStorage.setItem(this.settings.cacheName,e);return}return this._returnIfInLocales(window.localStorage.getItem(this.settings.cacheName))}catch{return}}_cacheWithSessionStorage(e){try{if(typeof window>"u"||typeof window.sessionStorage>"u")return;if(e){window.sessionStorage.setItem(this.settings.cacheName,e);return}return this._returnIfInLocales(window.sessionStorage.getItem(this.settings.cacheName))}catch{return}}_cacheWithCookies(e){try{if(typeof document>"u"||typeof document.cookie>"u")return;let t=encodeURIComponent(this.settings.cacheName);if(e){let r=`${this.settings.cookieFormat}`;r=r.replace("{{value}}",`${t}=${encodeURIComponent(e)}`).replace(/{{expires:?(\d+)?}}/g,(o,l)=>{let u=l===void 0?ct:parseInt(l,10),h=new Date;return h.setTime(h.getTime()+u*864e5),`expires=${h.toUTCString()}`}),document.cookie=r;return}let s=new RegExp("(?:^"+t+"|;\\s*"+t+")=(.*?)(?:;|$)","g").exec(document.cookie);return decodeURIComponent(s[1])}catch{return}}_returnIfInLocales(e){return e&&this.locales.indexOf(e)!==-1?e:null}translateText(e){if(this.escapePrefix&&e.startsWith(this.escapePrefix))return e.replace(this.escapePrefix,"");{if(!this._translationObject)return e;let t=this.prefix+e,i=this.translate.getParsedResult(this._translationObject,t);return i!==t?i:e}}chooseQueryParams(e,t){let i;return e&&e.queryParams?i=e.queryParams:t&&(i=t),i}formatQueryParams(e){return new Fe({fromObject:e}).toString()}getPrefix(){return this.prefix}getEscapePrefix(){return this.escapePrefix}static{this.\u0275fac=function(t){return new(t||n)(c(D),c(xe),c(G))}}static{this.\u0275prov=f({token:n,factory:n.\u0275fac})}}return n})();var ht=(()=>{class n extends E{load(e){return new Promise(t=>{this.init(e).then(t)})}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=S(n)))(i||n)}})()}static{this.\u0275prov=f({token:n,factory:n.\u0275fac})}}return n})();function W(n,a){if(n===a)return!0;if(n===null||a===null)return!1;if(n!==n&&a!==a)return!0;let e=typeof n,t=typeof a,i,s,r;if(e===t&&e==="object")if(Array.isArray(n)){if(!Array.isArray(a))return!1;if((i=n.length)===a.length){for(s=0;s<i;s++)if(!W(n[s],a[s]))return!1;return!0}}else{if(Array.isArray(a))return!1;r=Object.create(null);for(s in n)if(n.hasOwnProperty(s)){if(!W(n[s],a[s]))return!1;r[s]=!0}for(s in a)if(a.hasOwnProperty(s)&&!(s in r)&&typeof a[s]<"u")return!1;return!0}return!1}function dt(n){return!!n&&typeof n.then=="function"}function he(n){let a=Array.isArray(n)?[]:{};for(let e in n)if(e){let t=n[e];a[e]=typeof t=="object"?he(t):t}return a}var de=(()=>{class n{constructor(e,t,i,s){this.parser=e,this.settings=t,this.router=i,this.route=s,this.routerEvents=new H;let r=new me(1);this.hooks={_initializedSubject:r,initialized:r.asObservable()}}init(){this.applyConfigToRouter(this.parser.routes),this.router.events.pipe(Re(e=>e instanceof ze),Se()).subscribe(this._routeChanged()),this.settings.initialNavigation&&this.router.initialNavigation()}changeLanguage(e,t,i){if(e!==this.parser.currentLang){let s=this.router.routerState.snapshot.root;this.parser.translateRoutes(e).subscribe(()=>{let r=this.traverseRouteSnapshot(s);if(r=this.translateRoute(r),!this.settings.alwaysSetPrefix){let u=r.split("/"),h=u.indexOf(this.parser.currentLang);if(this.parser.currentLang===this.parser.defaultLang)(h===0||h===1&&u[0]==="")&&(u=u.slice(0,h).concat(u.slice(h+1)));else if(h===-1){let g=u[0]===""?1:0;u=u.slice(0,g).concat(this.parser.currentLang,u.slice(g))}r=u.join("/")}r=r.replace(/\/+/g,"/");let o=r.lastIndexOf("/");o>0&&o===r.length-1&&(r=r.slice(0,-1));let l=this.parser.chooseQueryParams(t,this.route.snapshot.queryParams);if(this.applyConfigToRouter(this.parser.routes),this.lastExtras=t,i){let u=t?p({},t):{};l&&(u.queryParams=l),this.router.navigate([r],u)}else{let u=this.parser.formatQueryParams(l);u=u?`?${u}`:"",this.router.navigateByUrl(`${r}${u}`,t)}})}}traverseRouteSnapshot(e){return e.firstChild&&e.routeConfig?`${this.parseSegmentValue(e)}/${this.traverseRouteSnapshot(e.firstChild)}`:e.firstChild?this.traverseRouteSnapshot(e.firstChild):this.parseSegmentValue(e)}buildUrlFromSegments(e,t){return t.map((i,s)=>i.indexOf(":")===0?e.url[s].path:i).join("/")}parseSegmentValue(e){if(e.routeConfig&&e.routeConfig.matcher){let t=this.parseSegmentValueMatcher(e);return this.buildUrlFromSegments(e,t)}else if(e.data.localizeRouter){let i=e.data.localizeRouter.path.split("/");return this.buildUrlFromSegments(e,i)}else if(e.parent&&e.parent.parent){let i=e.routeConfig.path.split("/");return this.buildUrlFromSegments(e,i)}else return""}parseSegmentValueMatcher(e){let t=e.data&&e.data.localizeMatcher&&e.data.localizeMatcher.params||{};return e.url.map(s=>{let r=s.path,o=s.localizedParamName;return(o&&t[o]?t[o](r):null)||`${this.parser.getEscapePrefix()}${r}`})}translateRoute(e){if(typeof e=="string"){let i=this.parser.translateRoute(e);return e.indexOf("/")?i:this.parser.addPrefixToUrl(i)}let t=[];return e.forEach((i,s)=>{if(typeof i=="string"){let r=this.parser.translateRoute(i);!s&&!i.indexOf("/")?t.push(this.parser.addPrefixToUrl(r)):t.push(r)}else t.push(i)}),t}_routeChanged(){return([e,t])=>{let i=this.parser.getLocationLang(e.url)||this.parser.defaultLang,s=this.parser.getLocationLang(t.url)||this.parser.defaultLang,r=this.lastExtras;s!==i&&this.latestUrl!==t.url&&(this.latestUrl=t.url,this.cancelCurrentNavigation(),this.parser.translateRoutes(s).subscribe(()=>{this.applyConfigToRouter(this.parser.routes),this.lastExtras=void 0,this.router.navigateByUrl(t.url,r),this.routerEvents.next(s)})),this.latestUrl=t.url}}cancelCurrentNavigation(){let e=this.router.getCurrentNavigation(),t=this.router.serializeUrl(e.extractedUrl);this.router.events.next(new Ue(e.id,t,"")),this.router.navigationTransitions.transitions.next(j(p({},this.router.navigationTransitions.transitions.getValue()),{id:0}))}applyConfigToRouter(e){this.router.resetConfig(he(e))}static{this.\u0275fac=function(t){return new(t||n)(c(E),c(G),c(P),c(Ve))}}static{this.\u0275prov=f({token:n,factory:n.\u0275fac})}}return n})(),ft=128,Bt=(()=>{class n{constructor(e,t){this.localize=e,this._ref=t,this.value="",this.subscription=this.localize.routerEvents.subscribe(()=>{this.transform(this.lastKey)})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}transform(e){if(!e||e.length===0||!this.localize.parser.currentLang)return e;if(W(e,this.lastKey)&&W(this.lastLanguage,this.localize.parser.currentLang))return this.value;this.lastKey=e,this.lastLanguage=this.localize.parser.currentLang,this.value=this.localize.translateRoute(e),this.lastKey=e;let t=this._ref._view;return t&&t.state&ft?this.value:(setTimeout(()=>{this._ref.detectChanges()},0),this.value)}static{this.\u0275fac=function(t){return new(t||n)(F(de,16),F(ee,16))}}static{this.\u0275pipe=J({name:"localize",type:n,pure:!1})}}return n})(),ce=class{constructor(){}shouldDetach(a){return!1}store(a,e){}shouldAttach(a){return!1}retrieve(a){return null}shouldReuseRoute(a,e){return a&&e?this.getKey(a)===this.getKey(e):!1}getKey(a){if(a.firstChild&&a.firstChild.routeConfig&&a.firstChild.routeConfig.path&&a.firstChild.routeConfig.path.indexOf("**")!==-1)return"WILDCARD";if(!a.data.localizeRouter&&(!a.parent||!a.parent.parent)&&!a.data.skipRouteLocalization)return"LANG";if(a.routeConfig.matcher){let e=`${this.getKey(a.parent)}/${a.routeConfig.matcher.name}`;return a.data.discriminantPathKey&&(e=`${e}-${a.data.discriminantPathKey}`),e}else if(a.data.localizeRouter){let e=`${this.getKey(a.parent)}/${a.data.localizeRouter.path}`;return a.data.discriminantPathKey&&(e=`${e}-${a.data.discriminantPathKey}`),e}else{let e=a.routeConfig.path;return a.parent&&(e=`${this.getKey(a.parent)}/${a.routeConfig.path}`),a.data.discriminantPathKey&&(e=`${e}-${a.data.discriminantPathKey}`),e}}},gt=(()=>{class n extends P{constructor(){super(),this.platformId=M(_e),this.compiler=M(je),this.localize=M(E),this.childrenLoaders=new WeakMap,this.loadModuleFactoryOrRoutes=(i,s)=>mt(s.loadChildren()).pipe(T(Lt),ve(r=>r instanceof De||Array.isArray(r)?L(r):q(this.compiler.compileModuleAsync(r))),T(r=>{this.onLoadEndListener&&this.onLoadEndListener(s);let o,l;if(Array.isArray(r))l=this.localize.initChildRoutes([].concat(...r));else{o=r.create(i).injector;let h=o.get.bind(o);o.get=(g,B,nt)=>{let fe=h(g,B,nt);return g===te?this.localize.initChildRoutes([].concat(...fe)):fe},l=o.get(te,[],{optional:!0,self:!0}).reduce((g,B)=>g.concat(B),[])}return{routes:l.map(et),injector:o}}));let t=Oe(this.platformId)?this.navigationTransitions.configLoader.__proto__:this.navigationTransitions.configLoader;t.loadChildren=(i,s)=>{if(this.childrenLoaders.get(s))return this.childrenLoaders.get(s);if(s._loadedRoutes)return L({routes:s._loadedRoutes,injector:s._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(s);let o=this.loadModuleFactoryOrRoutes(i,s).pipe(Te(()=>{this.childrenLoaders.delete(s)})),l=new Le(o,()=>new H).pipe(pe());return this.childrenLoaders.set(s,l),l}}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=f({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function et(n){let a=n.children&&n.children.map(et),e=a?j(p({},n),{children:a}):p({},n);return!e.component&&!e.loadComponent&&(a||e.loadChildren)&&e.outlet&&e.outlet!==Ne&&(e.component=Ke),e}function pt(n){return n&&typeof n=="object"&&"default"in n}function Lt(n){return pt(n)?n.default:n}function mt(n){return C(n)?n:dt(n)?q(Promise.resolve(n)):L(n)}var Be=(()=>{class n{constructor(e){this.injector=e}appInitializer(){return this.parser.load(this.routes).then(()=>{let t=this.injector.get(de),i=this.injector.get(P),s=this.injector.get(G);if(t.init(),s.initialNavigation)return new Promise(r=>{let o=i.navigationTransitions.afterPreactivation,l=!0;i.navigationTransitions.afterPreactivation=()=>(l&&(r(),l=!1,t.hooks._initializedSubject.next(!0),t.hooks._initializedSubject.complete()),o())});t.hooks._initializedSubject.next(!0),t.hooks._initializedSubject.complete()})}generateInitializer(e,t){return this.parser=e,this.routes=t.reduce((i,s)=>i.concat(s)),this.appInitializer}static{this.\u0275fac=function(t){return new(t||n)(c(Pe))}}static{this.\u0275prov=f({token:n,factory:n.\u0275fac})}}return n})();function Ct(n,a,e){let t=he(e);return n.generateInitializer(a,t).bind(n)}function tt(n,a){return[{provide:P,useClass:gt},{provide:at,useFactory:yt,deps:[[vt,new we,new Ie]]},{provide:He,useValue:a.useCachedLang},{provide:Je,useValue:a.alwaysSetPrefix},{provide:Ze,useValue:a.cacheName},{provide:qe,useValue:a.cacheMechanism},{provide:Qe,useValue:a.defaultLangFunction},{provide:Xe,useValue:a.cookieFormat},{provide:Ye,useValue:a.initialNavigation},G,a.parser||{provide:E,useClass:ht},{provide:ue,multi:!0,useValue:n},de,Be,{provide:Ee,multi:!0,useFactory:Ct,deps:[Be,E,ue]},{provide:$e,useClass:ce}]}var vt=(()=>{class n{static forRoot(e,t={}){return{ngModule:n,providers:tt(e,t)}}static forChild(e){return{ngModule:n,providers:[{provide:ue,multi:!0,useValue:e}]}}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=N({type:n})}static{this.\u0275inj=x({imports:[Me,ke,Ge]})}}return n})();function yt(n){if(n)throw new Error("LocalizeRouterModule.forRoot() called twice. Lazy loaded modules should use LocalizeRouterModule.forChild() instead.");return"guarded"}function Ht(n,a={}){return{\u0275kind:"LocalizeRouter",\u0275providers:tt(n,a)}}export{y as a,D as b,jt as c,G as d,E as e,de as f,Bt as g,Ht as h};
